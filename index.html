<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nurzao Global | Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ø¹Ø§Ù„Ù…</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<style>
:root {
  --neon-gold: #ffcf4d;
  --neon-blue: #00f2ff;
  --deep-bg: #050508;
  --glass: rgba(255, 255, 255, 0.05);
  --border: rgba(255, 255, 255, 0.1);
}

* { box-sizing:border-box; -webkit-tap-highlight-color: transparent; }
body {
  background: var(--deep-bg); background-image: radial-gradient(circle at top, #1a1a2e 0%, #050508 100%);
  color:white; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin:0; height:100vh; display:flex; flex-direction:column; overflow:hidden;
}

/* HEADER */
.header {
  padding: 20px; background: var(--glass); backdrop-filter: blur(15px);
  border-bottom:1px solid var(--border); display:flex; justify-content:space-between; align-items:center;
}
.user-pill { display:flex; align-items:center; gap:10px; background:rgba(0,0,0,0.3); padding:5px 15px; border-radius:50px; border:1px solid var(--neon-blue); }
.user-pill img { width:30px; height:30px; border-radius:50%; }
#balance { font-size:2rem; font-weight:900; color:var(--neon-gold); text-shadow:0 0 20px rgba(255,207,77,0.4); }

/* VIEW CONTAINERS */
.view-container { flex-grow:1; position:relative; overflow-y:auto; display:none; padding:20px; transition:0.3s; }
.active-view { display:flex; flex-direction:column; animation: slideUp 0.4s ease-out; }
@keyframes slideUp { from{transform:translateY(20px);opacity:0;} to{transform:translateY(0);opacity:1;} }

/* MINING CIRCLE */
.mine-circle { width:280px;height:280px;margin:auto;position:relative;display:flex;justify-content:center;align-items:center; }
.coin-shadow { position:absolute;width:100%;height:100%;border-radius:50%;background:var(--neon-gold);filter:blur(60px);opacity:0.1; }
.coin-btn { background:none;border:none; z-index:5; transition:0.1s; cursor:pointer; }
.coin-btn img { width:240px; animation:pulse 3s infinite; }
.coin-btn:active { transform:scale(0.92); }
@keyframes pulse { 0%,100%{transform:scale(1);} 50%{transform:scale(1.05);} }

/* ENERGY BAR */
.energy-section { padding:0 20px 20px; }
.energy-bar-bg { height:12px; background:#111; border-radius:10px; border:1px solid var(--border); overflow:hidden; }
#energy-fill { height:100%; width:100%; background:linear-gradient(90deg,var(--neon-gold),#fff); transition:0.3s; }

/* CARDS */
.card { background:var(--glass); border:1px solid var(--border); border-radius:20px; padding:20px; margin-bottom:15px; }
.task-item { display:flex; justify-content:space-between; align-items:center; margin-top:10px; padding:10px; background:rgba(255,255,255,0.03); border-radius:12px; }

/* NAV */
.nav-bar { background:rgba(0,0,0,0.9); backdrop-filter:blur(20px); border-top:1px solid var(--border); display:grid; grid-template-columns:repeat(5,1fr); padding:15px 0 30px; }
.nav-item { text-align:center; color:#666; transition:0.3s; cursor:pointer; }
.nav-item.active-nav { color:var(--neon-blue); text-shadow:0 0 10px var(--neon-blue); }
.nav-item i { font-size:1.4rem; display:block; margin-bottom:5px; }

/* +1 Effect */
.floating-click { position:absolute; color:var(--neon-gold); font-weight:900; pointer-events:none; animation:flyUp 0.8s forwards; }
@keyframes flyUp {0%{opacity:1;transform:translateY(0);}100%{opacity:0;transform:translateY(-100px);} }

/* BUTTONS */
button { padding:12px;border:none;border-radius:12px;background:#6c63ff;color:white;font-weight:bold; cursor:pointer;}
button:disabled {opacity:.4;}
.badge { display:inline-block;background:#2ecc71;padding:3px 8px;border-radius:10px;font-size:.7rem; }

</style>
</head>
<body>

<div class="header">
  <div class="user-pill">
    <img id="u-photo" src="https://ui-avatars.com/api/?name=User">
    <span id="u-name">ØªØ­Ù…ÙŠÙ„...</span>
  </div>
  <div id="balance">0</div>
</div>

<!-- MINING -->
<div id="mine-v" class="view-container active-view">
  <div class="mine-circle">
    <div class="coin-shadow"></div>
    <button class="coin-btn" id="tap-btn">
      <img src="https://img.icons8.com/fluency/240/gold-bars.png" alt="Coin">
    </button>
  </div>
  <div class="energy-section">
    <div style="display:flex; justify-content:space-between; margin-bottom:8px; font-size:0.9rem;">
      <span>âš¡ Ø§Ù„Ø·Ø§Ù‚Ø©: <span id="e-val">0</span>/1000</span>
      <span style="color:var(--neon-blue)">Ø±ØªØ¨ØªÙŠ: <span id="rank">Global</span></span>
    </div>
    <div class="energy-bar-bg"><div id="energy-fill"></div></div>
  </div>
</div>

<!-- TASKS -->
<div id="tasks-v" class="view-container">
  <h2>Ù…Ø±ÙƒØ² Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© (Ø§Ù„Ù…Ù‡Ø§Ù…)</h2>
  <div class="card" id="task-channel">
    <div class="task-item">
      <div>
        <b>Ù‚Ù†Ø§Ø© Ø§Ù„Ù†Ø®Ø¨Ø©</b>
        <div style="font-size:0.7rem;color:#888;">Ø§Ù†Ø¶Ù… Ù„Ù„Ù‚Ù†Ø§Ø© Ø§Ù„Ø±Ø³Ù…ÙŠØ© Ø¹Ù„Ù‰ ØªÙ„ØºØ±Ø§Ù…</div>
      </div>
      <button class="user-pill" onclick="completeTask('channel')">+500 ğŸ’°</button>
    </div>
  </div>
</div>

<!-- FRIENDS -->
<div id="friends-v" class="view-container">
  <h2>Ø¬ÙŠØ´ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ÙŠÙ†</h2>
  <div class="card" style="text-align:center;">
    <p>ÙƒÙ„ ØµØ¯ÙŠÙ‚ ØªØ¬Ù„Ø¨Ù‡ ÙŠØ²ÙŠØ¯ Ù…Ù† Ù‚ÙˆØªÙƒ Ø¨Ù†Ø³Ø¨Ø© 10%</p>
    <button class="user-pill" id="invite-btn">
      <i class="fas fa-share-nodes"></i> Ù…Ø´Ø§Ø±ÙƒØ© Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯Ø¹ÙˆØ©
    </button>
  </div>
  <p>Ø¹Ø¯Ø¯ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡: <span id="friend-count">0</span></p>
</div>

<!-- PROFILE -->
<div id="profile-v" class="view-container">
  <h2>Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ø´Ø®ØµÙŠ</h2>
  <div class="card">
    <p>ğŸ†” Ø§Ù„Ù…Ø¹Ø±Ù: <span id="p-id">0</span></p>
    <p>ğŸ—“ï¸ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù„ØªØ­Ø§Ù‚: <span id="p-date">-</span></p>
    <p>ğŸš€ Ø§Ù„Ø±ØªØ¨Ø©: <span id="p-rank">Pioneer</span></p>
    <p>ğŸ¥ˆ Silver: <span id="silver-status">Ù…Ù‚ÙÙ„Ø©</span></p>
    <p>ğŸ¥‡ Gold: <span id="gold-status">Ù…Ù‚ÙÙ„Ø©</span></p>
    <p>ğŸ›¡ Platinum: <span id="plat-status">Ù…Ù‚ÙÙ„Ø©</span></p>
  </div>
</div>

<!-- NAV -->
<div class="nav-bar">
  <div class="nav-item active-nav" onclick="showTab('mine-v',this)"><i class="fas fa-bolt"></i>ØªØ¹Ø¯ÙŠÙ†</div>
  <div class="nav-item" onclick="showTab('tasks-v',this)"><i class="fas fa-shield-halved"></i>Ø§Ù„Ù…Ù‡Ø§Ù…</div>
  <div class="nav-item" onclick="showTab('friends-v',this)"><i class="fas fa-crown"></i>Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡</div>
  <div class="nav-item" onclick="showTab('profile-v',this)"><i class="fas fa-user-gear"></i>Ù…Ù„ÙÙŠ</div>
  <div class="nav-item" onclick="showStore()"><i class="fas fa-store"></i>Ø§Ù„Ù…ØªØ¬Ø±</div>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();
const API = "https://YOUR-PYTHONANYWHERE-URL"; // ØºÙŠØ±ÙŠ Ù‡Ù†Ø§ Ù„Ù„Ø±Ø§Ø¨Ø· Ø§Ù„ØµØ­ÙŠØ­
const user = tg.initDataUnsafe.user || { first_name:"Ø§Ù„Ù‚Ø§Ø¦Ø¯", id:123456 };

// INITIALIZE
let balance=0, energy=1000, friendCount=0;

// UI Init
document.getElementById('u-name').innerText=user.first_name;
document.getElementById('p-id').innerText=user.id;

// Show tabs
function showTab(tabId, el){
  document.querySelectorAll('.view-container').forEach(v=>v.classList.remove('active-view'));
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active-nav'));
  document.getElementById(tabId).classList.add('active-view');
  el.classList.add('active-nav');
}

function showStore(){
  alert("Ù…ÙŠØ²Ø© Ø§Ù„Ù…ØªØ¬Ø± Ø¬Ø§Ù‡Ø²Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹ Ù„Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø©.");
}

// Fetch user data from API
async function loadUser(){
  const r = await fetch(`${API}/user/init/${user.id}`);
  const d = await r.json();
  balance = d.balance || 0;
  energy = d.energy || 1000;
  friendCount = d.friends || 0;

  document.getElementById('balance').innerText=balance.toLocaleString();
  document.getElementById('e-val').innerText=energy;
  document.getElementById('friend-count').innerText=friendCount;
  document.getElementById('p-rank').innerText=d.level;
  document.getElementById('silver-status').innerText=d.balance>=100?"Ù…ÙØ¹Ù„Ø©":"Ù…Ù‚ÙÙ„Ø©";
  document.getElementById('gold-status').innerText=d.balance>=1000?"Ù…ÙØ¹Ù„Ø©":"Ù…Ù‚ÙÙ„Ø©";
  document.getElementById('plat-status').innerText=d.balance>=5000?"Ù…ÙØ¹Ù„Ø©":"Ù…Ù‚ÙÙ„Ø©";
}

// Mining click
document.getElementById('tap-btn').addEventListener('click',async()=>{
  if(energy<2){ tg.showAlert("Ø·Ø§Ù‚ØªÙƒ ØºÙŠØ± ÙƒØ§ÙÙŠØ©!"); return;}
  const res = await fetch(`${API}/mine?user_id=${user.id}`,{method:'POST'});
  const data = await res.json();
  if(!data.error){
    balance = data.balance;
    energy = data.energy;
    document.getElementById('balance').innerText=balance.toLocaleString();
    document.getElementById('e-val').innerText=energy;
    tg.HapticFeedback.impactOccurred('medium');
  }
});

// Complete task
async function completeTask(task){
  const res = await fetch(`${API}/task/${task}?user_id=${user.id}`,{method:'POST'});
  const data = await res.json();
  if(data.success){ loadUser(); tg.showAlert(`ØªÙ… Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ù…Ù‡Ù…Ø©! +${data.reward} ğŸ’°`);}
}

// Invite friends
document.getElementById('invite-btn').onclick = () => {
  const link = `https://${window.location.hostname}?start=${user.id}`;
  navigator.clipboard.writeText(link);
  tg.showAlert("ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯Ø¹ÙˆØ©!");
}

// Auto update every 10s
loadUser();
setInterval(loadUser,10000);

</script>
</body>
                                                        </html>
